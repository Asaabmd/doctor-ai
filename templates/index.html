<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Doctor AI - Smart Health Assistant</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f9f9f9;
      padding: 20px;
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .logo {
      width: 100px;
    }
    .doctor {
      width: 100px;
    }
    .highlight {
      background-color: #e0f0ff;
      padding: 10px;
      margin-bottom: 20px;
      border-radius: 6px;
    }
    label {
      font-weight: bold;
    }
    textarea, input, select {
      width: 100%;
      padding: 10px;
      margin: 5px 0 15px;
      border-radius: 5px;
      border: 1px solid #ccc;
      background-color: white;
    }
    .mic-button {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 1.2em;
      margin-left: 5px;
    }
  </style>
  <script>
    function startDictation(id) {
      if (window.hasOwnProperty('webkitSpeechRecognition')) {
        var recognition = new webkitSpeechRecognition();
        recognition.continuous = false;
        recognition.interimResults = false;
        recognition.lang = "en-US";
        recognition.start();
        recognition.onresult = function(e) {
          document.getElementById(id).value = e.results[0][0].transcript;
          recognition.stop();
        };
        recognition.onerror = function(e) {
          recognition.stop();
        };
      }
    }

    function autoAdvance(currentFieldId, nextFieldId) {
      document.getElementById(currentFieldId).addEventListener("keydown", function(e) {
        if (e.key === "Enter") {
          e.preventDefault();
          document.getElementById(nextFieldId).scrollIntoView({ behavior: "smooth" });
          document.getElementById(nextFieldId).focus();
        }
      });
    }

    window.onload = function() {
      const fields = [
        "email", "age", "sex", "symptoms", "conditions", "allergies", "medications",
        "onset", "better", "worse", "severity", "treatments"
      ];
      for (let i = 0; i < fields.length - 1; i++) {
        autoAdvance(fields[i], fields[i + 1]);
      }
    };
  </script>
</head>
<body>
  <div class="header">
    <img src="{{ url_for('static', filename='doctor.jpeg') }}" alt="Doctor" class="doctor" />
    <img src="{{ url_for('static', filename='logo.png') }}" alt="Logo" class="logo" />
  </div>

  <h2>Doctor AI - Smart Health Assistant</h2>
  <div class="highlight">
    <strong>What this app does:</strong> Doctor AI provides an educational summary based on your symptoms, including possible causes, over-the-counter options, home remedies, and red flags. This is for educational purposes only and not a substitute for a physician.
  </div>

  <form method="POST" action="/summary">
    <label>Email (required):</label>
    <input type="email" name="email" id="email" required placeholder="Enter your email" />

    <label>Age:</label>
    <input type="number" name="age" id="age" placeholder="Enter your age in years" />

    <label>Sex:</label>
    <select name="sex" id="sex">
      <option value="">Select your sex</option>
      <option value="Male">Male</option>
      <option value="Female">Female</option>
      <option value="Other">Other</option>
    </select>

    <label>Describe your symptoms:</label>
    <textarea name="symptoms" id="symptoms" placeholder="Describe your symptoms in detail. The more details you provide, the more customized your summary will be."></textarea>
    <button class="mic-button" type="button" onclick="startDictation('symptoms')">üé§</button>

    <label>Existing conditions:</label>
    <textarea name="conditions" id="conditions" placeholder="What are your current medical conditions?"></textarea>
    <button class="mic-button" type="button" onclick="startDictation('conditions')">üé§</button>

    <label>Allergies:</label>
    <textarea name="allergies" id="allergies" placeholder="Allergies to medications, food, or other items. If none, enter 'None'."></textarea>
    <button class="mic-button" type="button" onclick="startDictation('allergies')">üé§</button>

    <label>Current medications:</label>
    <textarea name="medications" id="medications" placeholder="What medications do you take?"></textarea>
    <button class="mic-button" type="button" onclick="startDictation('medications')">üé§</button>

    <label>When did it start?</label>
    <textarea name="onset" id="onset" placeholder="When did your current symptoms start?"></textarea>
    <button class="mic-button" type="button" onclick="startDictation('onset')">üé§</button>

    <label>What makes it better?</label>
    <textarea name="better" id="better" placeholder="What makes your symptoms better? If not sure, enter 'NA'."></textarea>
    <button class="mic-button" type="button" onclick="startDictation('better')">üé§</button>

    <label>What makes it worse?</label>
    <textarea name="worse" id="worse" placeholder="What makes your symptoms worse? If not sure, enter 'NA'."></textarea>
    <button class="mic-button" type="button" onclick="startDictation('worse')">üé§</button>

    <label>Severity (1‚Äì10):</label>
    <textarea name="severity" id="severity" placeholder="How severe are your symptoms? (10 is the most severe)"></textarea>
    <button class="mic-button" type="button" onclick="startDictation('severity')">üé§</button>

    <label>What have you tried?</label>
    <textarea name="treatments" id="treatments" placeholder="What medications or remedies have you tried for your symptoms?"></textarea>
    <button class="mic-button" type="button" onclick="startDictation('treatments')">üé§</button>

    <div class="highlight">
      ‚úÖ <strong>Please complete all fields thoroughly.</strong><br/>
      ‚è≥ After clicking Submit, please wait a few moments for your personalized summary to appear.
    </div>

    <button type="submit">Submit</button>
  </form>

  <br />
  <div class="highlight">
    <strong>Disclaimer:</strong> This app is for educational purposes only and is not a substitute for professional medical care.
  </div>
</body>
</html>
